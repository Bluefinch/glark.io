<!--
*   Partial for filetree view
* -->

<script type="text/ng-template" id="directory_node_template">
    <a title="{{entry.name}}" ng-click="toggleCollapsed(entry)">
        <i ng-class="{'icon-angle-right': entry.collapsed, 'icon-angle-down': !entry.collapsed}"></i>
        {{entry.name}}
    </a>
    <div ng-switch on="entry.collapsed">
        <div ng-switch-when="false">
            <ul>
                <li ng-repeat="entry in entry.children | foldersFirst" ng-include="'filetree_node_template'"></li>
            </ul>
        </div>
    </div>
</script>
    
<script type="text/ng-template" id="filetree_node_template">
    <div ng-switch on="entry.isDirectory">
        <div ng-switch-when="true">
           <div ng-include="'directory_node_template'"></div>
        </div>
        <div ng-switch-when="false">
            <a title="{{entry.name}}" ng-click="editor.previewFile(entry)" ng-dblclick="workspace.setActiveFile(entry)">{{entry.name}}</a>
        </div>
    </div>
</script>

<div class="filetree" ng-controller="WorkspaceController">
    <ul ng-show="isActiveWorkspace(workspace)">
        <li ng-repeat="entry in workspace.rootDirectory.children | foldersFirst" ng-include="'filetree_node_template'"></li>
    </ul>
</div>

